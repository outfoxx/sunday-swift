{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ServerTrustPolicy"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Using pinned certificates or public keys for evaluation helps prevent man-in-the-middle (MITM) attacks and other"},{"type":"text","text":" "},{"type":"text","text":"vulnerabilities. Applications dealing with sensitive customer data or financial information are strongly encouraged"},{"type":"text","text":" "},{"type":"text","text":"to route all communication over an HTTPS connection with pinning enabled."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"performDefaultEvaluation: Uses the default server trust evaluation while allowing you to control whether to"},{"type":"text","text":" "},{"type":"text","text":"validate the host provided by the challenge. Applications are encouraged to always"},{"type":"text","text":" "},{"type":"text","text":"validate the host in production environments to guarantee the validity of the server’s"},{"type":"text","text":" "},{"type":"text","text":"certificate chain."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"performRevokedEvaluation: Uses the default and revoked server trust evaluations allowing you to control whether to"},{"type":"text","text":" "},{"type":"text","text":"validate the host provided by the challenge as well as specify the revocation flags for"},{"type":"text","text":" "},{"type":"text","text":"testing for revoked certificates. Apple platforms did not start testing for revoked"},{"type":"text","text":" "},{"type":"text","text":"certificates automatically until iOS 10.1, macOS 10.12 and tvOS 10.1 which is"},{"type":"text","text":" "},{"type":"text","text":"demonstrated in our TLS tests. Applications are encouraged to always validate the host"},{"type":"text","text":" "},{"type":"text","text":"in production environments to guarantee the validity of the server’s certificate chain."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"pinCertificates:          Uses the pinned certificates to validate the server trust. The server trust is"},{"type":"text","text":" "},{"type":"text","text":"considered valid if one of the pinned certificates match one of the server certificates."},{"type":"text","text":" "},{"type":"text","text":"By validating both the certificate chain and host, certificate pinning provides a very"},{"type":"text","text":" "},{"type":"text","text":"secure form of server trust validation mitigating most, if not all, MITM attacks."},{"type":"text","text":" "},{"type":"text","text":"Applications are encouraged to always validate the host and require a valid certificate"},{"type":"text","text":" "},{"type":"text","text":"chain in production environments."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"pinPublicKeys:            Uses the pinned public keys to validate the server trust. The server trust is considered"},{"type":"text","text":" "},{"type":"text","text":"valid if one of the pinned public keys match one of the server certificate public keys."},{"type":"text","text":" "},{"type":"text","text":"By validating both the certificate chain and host, public key pinning provides a very"},{"type":"text","text":" "},{"type":"text","text":"secure form of server trust validation mitigating most, if not all, MITM attacks."},{"type":"text","text":" "},{"type":"text","text":"Applications are encouraged to always validate the host and require a valid certificate"},{"type":"text","text":" "},{"type":"text","text":"chain in production environments."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"disableEvaluation:        Disables all evaluation which in turn will always consider any server trust as valid."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"customEvaluation:         Uses the associated closure to evaluate the validity of the server trust."}]}]}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/sunday\/servertrustpolicy"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ServerTrustPolicy"},{"type":"text","text":" evaluates the server trust generally provided by an "},{"type":"codeVoice","code":"NSURLAuthenticationChallenge"},{"type":"text","text":" when"},{"type":"text","text":" "},{"type":"text","text":"connecting to a server over a secure HTTPS connection. The policy configuration then evaluates the server trust"},{"type":"text","text":" "},{"type":"text","text":"with a given set of criteria to determine whether the server trust is valid and the connection should be made."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ServerTrustPolicy"}],"title":"ServerTrustPolicy","roleHeading":"Enumeration","role":"symbol","symbolKind":"enum","externalID":"s:6Sunday17ServerTrustPolicyO","modules":[{"name":"Sunday"}],"navigatorTitle":[{"kind":"identifier","text":"ServerTrustPolicy"}]},"hierarchy":{"paths":[["doc:\/\/Sunday\/documentation\/Sunday"]]},"topicSections":[{"title":"Enumeration Cases","identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/customEvaluation(_:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/disableEvaluation","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performDefaultEvaluation(validateHost:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performRevokedEvaluation(validateHost:revocationFlags:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinCertificates(certificates:validateCertificateChain:validateHost:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)"]},{"title":"Instance Methods","identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/evaluate(_:forHost:)"]},{"title":"Type Methods","identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/certificates(in:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/publicKeys(in:)"]}],"references":{"doc://Sunday/documentation/Sunday/ServerTrustPolicy/publicKeys(in:)":{"role":"symbol","title":"publicKeys(in:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"publicKeys"},{"kind":"text","text":"("},{"kind":"externalParam","text":"in"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bundle","preciseIdentifier":"c:objc(cs)NSBundle"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","text":"SecKey","preciseIdentifier":"c:@T@SecKeyRef"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Extracts and returns all public keys from certificates within the given bundle with a "},{"type":"codeVoice","code":".cer"},{"type":"text","text":", "},{"type":"codeVoice","code":".CER"},{"type":"text","text":", "},{"type":"codeVoice","code":".crt"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"codeVoice","code":".CRT"},{"type":"text","text":", "},{"type":"codeVoice","code":".der"},{"type":"text","text":", or "},{"type":"codeVoice","code":".DER"},{"type":"text","text":" file extension."}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/publicKeys(in:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/publickeys(in:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/performRevokedEvaluation(validateHost:revocationFlags:)":{"role":"symbol","title":"ServerTrustPolicy.performRevokedEvaluation(validateHost:revocationFlags:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"performRevokedEvaluation"},{"kind":"text","text":"("},{"kind":"externalParam","text":"validateHost"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"revocationFlags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CFOptionFlags","preciseIdentifier":"c:@T@CFOptionFlags"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performRevokedEvaluation(validateHost:revocationFlags:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/performrevokedevaluation(validatehost:revocationflags:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/disableEvaluation":{"role":"symbol","title":"ServerTrustPolicy.disableEvaluation","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"disableEvaluation"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/disableEvaluation","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/disableevaluation"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/customEvaluation(_:)":{"role":"symbol","title":"ServerTrustPolicy.customEvaluation(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"customEvaluation"},{"kind":"text","text":"(("},{"kind":"typeIdentifier","text":"SecTrust","preciseIdentifier":"c:@T@SecTrustRef"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/customEvaluation(_:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/customevaluation(_:)"},"doc://Sunday/documentation/Sunday":{"role":"collection","title":"Sunday","abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday","kind":"symbol","type":"topic","url":"\/documentation\/sunday"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/evaluate(_:forHost:)":{"role":"symbol","title":"evaluate(_:forHost:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"evaluate"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"SecTrust","preciseIdentifier":"c:@T@SecTrustRef"},{"kind":"text","text":", "},{"kind":"externalParam","text":"forHost"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Evaluates whether the server trust is valid for the given host."}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/evaluate(_:forHost:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/evaluate(_:forhost:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/certificates(in:)":{"role":"symbol","title":"certificates(in:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"certificates"},{"kind":"text","text":"("},{"kind":"externalParam","text":"in"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bundle","preciseIdentifier":"c:objc(cs)NSBundle"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","text":"SecCertificate","preciseIdentifier":"c:@T@SecCertificateRef"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Returns all certificates within the given bundle with a "},{"type":"codeVoice","code":".cer"},{"type":"text","text":", "},{"type":"codeVoice","code":".CER"},{"type":"text","text":", "},{"type":"codeVoice","code":".crt"},{"type":"text","text":", "},{"type":"codeVoice","code":".CRT"},{"type":"text","text":", "},{"type":"codeVoice","code":".der"},{"type":"text","text":", or "},{"type":"codeVoice","code":".DER"},{"type":"text","text":" "},{"type":"text","text":"file extensions."}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/certificates(in:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/certificates(in:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy":{"role":"symbol","title":"ServerTrustPolicy","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ServerTrustPolicy"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ServerTrustPolicy"},{"type":"text","text":" evaluates the server trust generally provided by an "},{"type":"codeVoice","code":"NSURLAuthenticationChallenge"},{"type":"text","text":" when"},{"type":"text","text":" "},{"type":"text","text":"connecting to a server over a secure HTTPS connection. The policy configuration then evaluates the server trust"},{"type":"text","text":" "},{"type":"text","text":"with a given set of criteria to determine whether the server trust is valid and the connection should be made."}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ServerTrustPolicy"}],"url":"\/documentation\/sunday\/servertrustpolicy"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/performDefaultEvaluation(validateHost:)":{"role":"symbol","title":"ServerTrustPolicy.performDefaultEvaluation(validateHost:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"performDefaultEvaluation"},{"kind":"text","text":"("},{"kind":"externalParam","text":"validateHost"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performDefaultEvaluation(validateHost:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/performdefaultevaluation(validatehost:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)":{"role":"symbol","title":"ServerTrustPolicy.pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"pinPublicKeys"},{"kind":"text","text":"("},{"kind":"externalParam","text":"publicKeys"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"SecKey","preciseIdentifier":"c:@T@SecKeyRef"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"validateCertificateChain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"validateHost"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/pinpublickeys(publickeys:validatecertificatechain:validatehost:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/pinCertificates(certificates:validateCertificateChain:validateHost:)":{"role":"symbol","title":"ServerTrustPolicy.pinCertificates(certificates:validateCertificateChain:validateHost:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"pinCertificates"},{"kind":"text","text":"("},{"kind":"externalParam","text":"certificates"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"SecCertificate","preciseIdentifier":"c:@T@SecCertificateRef"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"validateCertificateChain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"validateHost"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinCertificates(certificates:validateCertificateChain:validateHost:)","kind":"symbol","type":"topic","url":"\/documentation\/sunday\/servertrustpolicy\/pincertificates(certificates:validatecertificatechain:validatehost:)"}}}