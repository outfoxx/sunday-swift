{"topicSections":[{"anchor":"Enumeration-Cases","title":"Enumeration Cases","identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/customEvaluation(_:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/disableEvaluation","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performDefaultEvaluation(validateHost:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performRevokedEvaluation(validateHost:revocationFlags:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinCertificates(certificates:validateCertificateChain:validateHost:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)"],"generated":true},{"title":"Instance Methods","anchor":"Instance-Methods","identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/evaluate(_:forHost:)"],"generated":true},{"identifiers":["doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/certificates(in:)","doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/publicKeys(in:)"],"anchor":"Type-Methods","generated":true,"title":"Type Methods"}],"schemaVersion":{"patch":0,"minor":3,"major":0},"hierarchy":{"paths":[["doc:\/\/Sunday\/documentation\/Sunday"]]},"kind":"symbol","metadata":{"navigatorTitle":[{"kind":"identifier","text":"ServerTrustPolicy"}],"title":"ServerTrustPolicy","role":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"ServerTrustPolicy","kind":"identifier"}],"symbolKind":"enum","roleHeading":"Enumeration","externalID":"s:6Sunday17ServerTrustPolicyO","modules":[{"name":"Sunday"}]},"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ServerTrustPolicy"},{"text":" evaluates the server trust generally provided by an ","type":"text"},{"type":"codeVoice","code":"NSURLAuthenticationChallenge"},{"text":" when","type":"text"},{"type":"text","text":" "},{"type":"text","text":"connecting to a server over a secure HTTPS connection. The policy configuration then evaluates the server trust"},{"text":" ","type":"text"},{"text":"with a given set of criteria to determine whether the server trust is valid and the connection should be made.","type":"text"}],"identifier":{"url":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy","interfaceLanguage":"swift"},"primaryContentSections":[{"declarations":[{"tokens":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ServerTrustPolicy"}],"platforms":["macOS"],"languages":["swift"]}],"kind":"declarations"},{"content":[{"text":"Overview","type":"heading","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Using pinned certificates or public keys for evaluation helps prevent man-in-the-middle (MITM) attacks and other"},{"text":" ","type":"text"},{"text":"vulnerabilities. Applications dealing with sensitive customer data or financial information are strongly encouraged","type":"text"},{"type":"text","text":" "},{"text":"to route all communication over an HTTPS connection with pinning enabled.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"performDefaultEvaluation: Uses the default server trust evaluation while allowing you to control whether to","type":"text"},{"type":"text","text":" "},{"text":"validate the host provided by the challenge. Applications are encouraged to always","type":"text"},{"type":"text","text":" "},{"text":"validate the host in production environments to guarantee the validity of the server’s","type":"text"},{"type":"text","text":" "},{"text":"certificate chain.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"performRevokedEvaluation: Uses the default and revoked server trust evaluations allowing you to control whether to","type":"text"},{"type":"text","text":" "},{"type":"text","text":"validate the host provided by the challenge as well as specify the revocation flags for"},{"text":" ","type":"text"},{"type":"text","text":"testing for revoked certificates. Apple platforms did not start testing for revoked"},{"text":" ","type":"text"},{"type":"text","text":"certificates automatically until iOS 10.1, macOS 10.12 and tvOS 10.1 which is"},{"text":" ","type":"text"},{"type":"text","text":"demonstrated in our TLS tests. Applications are encouraged to always validate the host"},{"text":" ","type":"text"},{"type":"text","text":"in production environments to guarantee the validity of the server’s certificate chain."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"pinCertificates:          Uses the pinned certificates to validate the server trust. The server trust is"},{"type":"text","text":" "},{"text":"considered valid if one of the pinned certificates match one of the server certificates.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"By validating both the certificate chain and host, certificate pinning provides a very"},{"type":"text","text":" "},{"text":"secure form of server trust validation mitigating most, if not all, MITM attacks.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Applications are encouraged to always validate the host and require a valid certificate"},{"type":"text","text":" "},{"text":"chain in production environments.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"pinPublicKeys:            Uses the pinned public keys to validate the server trust. The server trust is considered","type":"text"},{"text":" ","type":"text"},{"text":"valid if one of the pinned public keys match one of the server certificate public keys.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"By validating both the certificate chain and host, public key pinning provides a very"},{"text":" ","type":"text"},{"type":"text","text":"secure form of server trust validation mitigating most, if not all, MITM attacks."},{"text":" ","type":"text"},{"text":"Applications are encouraged to always validate the host and require a valid certificate","type":"text"},{"type":"text","text":" "},{"type":"text","text":"chain in production environments."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"disableEvaluation:        Disables all evaluation which in turn will always consider any server trust as valid.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"customEvaluation:         Uses the associated closure to evaluate the validity of the server trust.","type":"text"}]}]}]}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/sunday\/servertrustpolicy"]}],"sections":[],"references":{"doc://Sunday/documentation/Sunday/ServerTrustPolicy/publicKeys(in:)":{"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/publicKeys(in:)","role":"symbol","abstract":[{"type":"text","text":"Extracts and returns all public keys from certificates within the given bundle with a "},{"type":"codeVoice","code":".cer"},{"type":"text","text":", "},{"type":"codeVoice","code":".CER"},{"type":"text","text":", "},{"type":"codeVoice","code":".crt"},{"type":"text","text":","},{"text":" ","type":"text"},{"type":"codeVoice","code":".CRT"},{"text":", ","type":"text"},{"code":".der","type":"codeVoice"},{"text":", or ","type":"text"},{"type":"codeVoice","code":".DER"},{"type":"text","text":" file extension."}],"title":"publicKeys(in:)","type":"topic","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"publicKeys","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"in"},{"kind":"text","text":": "},{"preciseIdentifier":"c:objc(cs)NSBundle","text":"Bundle","kind":"typeIdentifier"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","preciseIdentifier":"c:@T@SecKeyRef","text":"SecKey"},{"text":"]","kind":"text"}],"url":"\/documentation\/sunday\/servertrustpolicy\/publickeys(in:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/performDefaultEvaluation(validateHost:)":{"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performDefaultEvaluation(validateHost:)","title":"ServerTrustPolicy.performDefaultEvaluation(validateHost:)","kind":"symbol","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"performDefaultEvaluation"},{"kind":"text","text":"("},{"kind":"externalParam","text":"validateHost"},{"kind":"text","text":": "},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"text":")","kind":"text"}],"type":"topic","role":"symbol","url":"\/documentation\/sunday\/servertrustpolicy\/performdefaultevaluation(validatehost:)","abstract":[]},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/disableEvaluation":{"type":"topic","title":"ServerTrustPolicy.disableEvaluation","abstract":[],"role":"symbol","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"disableEvaluation"}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/disableEvaluation","url":"\/documentation\/sunday\/servertrustpolicy\/disableevaluation","kind":"symbol"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy":{"url":"\/documentation\/sunday\/servertrustpolicy","abstract":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"ServerTrustPolicy"},{"type":"text","text":" evaluates the server trust generally provided by an "},{"code":"NSURLAuthenticationChallenge","type":"codeVoice"},{"text":" when","type":"text"},{"text":" ","type":"text"},{"text":"connecting to a server over a secure HTTPS connection. The policy configuration then evaluates the server trust","type":"text"},{"type":"text","text":" "},{"type":"text","text":"with a given set of criteria to determine whether the server trust is valid and the connection should be made."}],"kind":"symbol","type":"topic","title":"ServerTrustPolicy","navigatorTitle":[{"kind":"identifier","text":"ServerTrustPolicy"}],"role":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"text":"ServerTrustPolicy","kind":"identifier"}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/pinCertificates(certificates:validateCertificateChain:validateHost:)":{"abstract":[],"kind":"symbol","url":"\/documentation\/sunday\/servertrustpolicy\/pincertificates(certificates:validatecertificatechain:validatehost:)","fragments":[{"text":"case","kind":"keyword"},{"kind":"text","text":" "},{"text":"pinCertificates","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"certificates"},{"text":": [","kind":"text"},{"text":"SecCertificate","kind":"typeIdentifier","preciseIdentifier":"c:@T@SecCertificateRef"},{"kind":"text","text":"], "},{"text":"validateCertificateChain","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"},{"text":", ","kind":"text"},{"text":"validateHost","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"text":")","kind":"text"}],"type":"topic","title":"ServerTrustPolicy.pinCertificates(certificates:validateCertificateChain:validateHost:)","role":"symbol","identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinCertificates(certificates:validateCertificateChain:validateHost:)"},"doc://Sunday/documentation/Sunday":{"kind":"symbol","title":"Sunday","identifier":"doc:\/\/Sunday\/documentation\/Sunday","role":"collection","abstract":[],"url":"\/documentation\/sunday","type":"topic"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/customEvaluation(_:)":{"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/customEvaluation(_:)","title":"ServerTrustPolicy.customEvaluation(_:)","kind":"symbol","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"kind":"identifier","text":"customEvaluation"},{"kind":"text","text":"(("},{"text":"SecTrust","kind":"typeIdentifier","preciseIdentifier":"c:@T@SecTrustRef"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"kind":"text","text":")"}],"type":"topic","role":"symbol","url":"\/documentation\/sunday\/servertrustpolicy\/customevaluation(_:)","abstract":[]},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)":{"abstract":[],"role":"symbol","kind":"symbol","type":"topic","title":"ServerTrustPolicy.pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)","identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/pinPublicKeys(publicKeys:validateCertificateChain:validateHost:)","fragments":[{"text":"case","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"pinPublicKeys"},{"kind":"text","text":"("},{"text":"publicKeys","kind":"externalParam"},{"kind":"text","text":": ["},{"text":"SecKey","kind":"typeIdentifier","preciseIdentifier":"c:@T@SecKeyRef"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"validateCertificateChain"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"text":", ","kind":"text"},{"text":"validateHost","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"text":")","kind":"text"}],"url":"\/documentation\/sunday\/servertrustpolicy\/pinpublickeys(publickeys:validatecertificatechain:validatehost:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/performRevokedEvaluation(validateHost:revocationFlags:)":{"abstract":[],"role":"symbol","title":"ServerTrustPolicy.performRevokedEvaluation(validateHost:revocationFlags:)","type":"topic","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"text":"performRevokedEvaluation","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"validateHost"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"revocationFlags","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"CFOptionFlags","preciseIdentifier":"c:@T@CFOptionFlags"},{"text":")","kind":"text"}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/performRevokedEvaluation(validateHost:revocationFlags:)","url":"\/documentation\/sunday\/servertrustpolicy\/performrevokedevaluation(validatehost:revocationflags:)","kind":"symbol"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/certificates(in:)":{"url":"\/documentation\/sunday\/servertrustpolicy\/certificates(in:)","abstract":[{"type":"text","text":"Returns all certificates within the given bundle with a "},{"type":"codeVoice","code":".cer"},{"type":"text","text":", "},{"code":".CER","type":"codeVoice"},{"type":"text","text":", "},{"code":".crt","type":"codeVoice"},{"text":", ","type":"text"},{"code":".CRT","type":"codeVoice"},{"type":"text","text":", "},{"code":".der","type":"codeVoice"},{"type":"text","text":", or "},{"type":"codeVoice","code":".DER"},{"type":"text","text":" "},{"type":"text","text":"file extensions."}],"kind":"symbol","title":"certificates(in:)","type":"topic","role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"certificates","kind":"identifier"},{"text":"(","kind":"text"},{"text":"in","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"c:objc(cs)NSBundle","kind":"typeIdentifier","text":"Bundle"},{"kind":"text","text":") -> ["},{"preciseIdentifier":"c:@T@SecCertificateRef","text":"SecCertificate","kind":"typeIdentifier"},{"text":"]","kind":"text"}],"identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/certificates(in:)"},"doc://Sunday/documentation/Sunday/ServerTrustPolicy/evaluate(_:forHost:)":{"type":"topic","title":"evaluate(_:forHost:)","identifier":"doc:\/\/Sunday\/documentation\/Sunday\/ServerTrustPolicy\/evaluate(_:forHost:)","role":"symbol","abstract":[{"text":"Evaluates whether the server trust is valid for the given host.","type":"text"}],"url":"\/documentation\/sunday\/servertrustpolicy\/evaluate(_:forhost:)","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"evaluate","kind":"identifier"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"c:@T@SecTrustRef","text":"SecTrust"},{"kind":"text","text":", "},{"text":"forHost","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":") -> ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"}]}}}